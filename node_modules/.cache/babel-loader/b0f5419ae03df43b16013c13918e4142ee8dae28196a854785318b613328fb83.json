{"ast":null,"code":"import axios from \"axios\";\n// Função para formatar a data\nconst formatDate = dateString => {\n  const date = new Date(dateString);\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // Mês começa em 0\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}${month}${day}`; // Formato YYYYMMDD\n};\nexport const fetchOrgaoInfo = async (cnpj, dataInicial, dataFinal, pagina) => {\n  const url = \"https://pncp.gov.br/api/consulta/v1/contratos\";\n  const params = {\n    cnpj: cnpj.replace(/[^\\d]+/g, \"\"),\n    // Remove formatação do CNPJ\n    dataInicial: formatDate(dataInicial),\n    dataFinal: formatDate(dataFinal),\n    pagina\n  };\n  try {\n    // Adicione o log aqui\n    console.log(\"Parâmetros da solicitação:\", {\n      cnpj: params.cnpj,\n      dataInicial: params.dataInicial,\n      dataFinal: params.dataFinal,\n      pagina\n    });\n    const response = await axios.get(url, {\n      params\n    });\n    return response.data;\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      var _error$response, _error$response2;\n      console.error(\"Erro ao buscar informações do órgão:\", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data.message) || \"Erro ao buscar informações.\");\n    } else {\n      console.error(\"Erro desconhecido:\", error);\n      throw new Error(\"Erro ao buscar informações.\");\n    }\n  }\n};","map":{"version":3,"names":["axios","formatDate","dateString","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","fetchOrgaoInfo","cnpj","dataInicial","dataFinal","pagina","url","params","replace","console","log","response","get","data","error","isAxiosError","_error$response","_error$response2","Error","message"],"sources":["C:/Users/tuliana/orgsearch/src/api/pncpAPI.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { InfoOrgao, InfoContrato } from \"../tipos/index\";\r\n\r\n// Função para formatar a data\r\nconst formatDate = (dateString: string): string => {\r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // Mês começa em 0\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}${month}${day}`; // Formato YYYYMMDD\r\n};\r\n\r\nexport const fetchOrgaoInfo = async (cnpj: string, dataInicial: string, dataFinal: string, pagina: number) => {\r\n  const url = \"https://pncp.gov.br/api/consulta/v1/contratos\";\r\n  const params = {\r\n    cnpj: cnpj.replace(/[^\\d]+/g, \"\"), // Remove formatação do CNPJ\r\n    dataInicial: formatDate(dataInicial),\r\n    dataFinal: formatDate(dataFinal),\r\n    pagina,\r\n  };\r\n\r\n  try {\r\n    // Adicione o log aqui\r\n    console.log(\"Parâmetros da solicitação:\", { cnpj: params.cnpj, dataInicial: params.dataInicial, dataFinal: params.dataFinal, pagina });\r\n\r\n    const response = await axios.get(url, { params });\r\n    return response.data;\r\n  } catch (error: unknown) {\r\n    if (axios.isAxiosError(error)) {\r\n      console.error(\"Erro ao buscar informações do órgão:\", error.response?.data);\r\n      throw new Error(error.response?.data.message || \"Erro ao buscar informações.\");\r\n    } else {\r\n      console.error(\"Erro desconhecido:\", error);\r\n      throw new Error(\"Erro ao buscar informações.\");\r\n    }\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB;AACA,MAAMC,UAAU,GAAIC,UAAkB,IAAa;EACjD,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;EACjC,MAAMG,IAAI,GAAGF,IAAI,CAACG,WAAW,CAAC,CAAC;EAC/B,MAAMC,KAAK,GAAGC,MAAM,CAACL,IAAI,CAACM,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;EAC5D,MAAMC,GAAG,GAAGH,MAAM,CAACL,IAAI,CAACS,OAAO,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACnD,OAAO,GAAGL,IAAI,GAAGE,KAAK,GAAGI,GAAG,EAAE,CAAC,CAAC;AAClC,CAAC;AAED,OAAO,MAAME,cAAc,GAAG,MAAAA,CAAOC,IAAY,EAAEC,WAAmB,EAAEC,SAAiB,EAAEC,MAAc,KAAK;EAC5G,MAAMC,GAAG,GAAG,+CAA+C;EAC3D,MAAMC,MAAM,GAAG;IACbL,IAAI,EAAEA,IAAI,CAACM,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;IAAE;IACnCL,WAAW,EAAEd,UAAU,CAACc,WAAW,CAAC;IACpCC,SAAS,EAAEf,UAAU,CAACe,SAAS,CAAC;IAChCC;EACF,CAAC;EAED,IAAI;IACF;IACAI,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE;MAAER,IAAI,EAAEK,MAAM,CAACL,IAAI;MAAEC,WAAW,EAAEI,MAAM,CAACJ,WAAW;MAAEC,SAAS,EAAEG,MAAM,CAACH,SAAS;MAAEC;IAAO,CAAC,CAAC;IAEtI,MAAMM,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAG,CAACN,GAAG,EAAE;MAAEC;IAAO,CAAC,CAAC;IACjD,OAAOI,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAc,EAAE;IACvB,IAAI1B,KAAK,CAAC2B,YAAY,CAACD,KAAK,CAAC,EAAE;MAAA,IAAAE,eAAA,EAAAC,gBAAA;MAC7BR,OAAO,CAACK,KAAK,CAAC,sCAAsC,GAAAE,eAAA,GAAEF,KAAK,CAACH,QAAQ,cAAAK,eAAA,uBAAdA,eAAA,CAAgBH,IAAI,CAAC;MAC3E,MAAM,IAAIK,KAAK,CAAC,EAAAD,gBAAA,GAAAH,KAAK,CAACH,QAAQ,cAAAM,gBAAA,uBAAdA,gBAAA,CAAgBJ,IAAI,CAACM,OAAO,KAAI,6BAA6B,CAAC;IAChF,CAAC,MAAM;MACLV,OAAO,CAACK,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC1C,MAAM,IAAII,KAAK,CAAC,6BAA6B,CAAC;IAChD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}